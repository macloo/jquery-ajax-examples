<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title> jQuery Example with $.ajax and $.each</title>
	<link rel="stylesheet" href="css/normalize.min.css">
	<link rel="stylesheet" href="css/presidents.css">
</head>
<body>
<h1>$.ajax() example with $.each()</h1>

<p>This example uses <code>$.each()</code> to ... (There are 45 presidents.)</p>

<p>First, jQuery loads the images into a CSS flexbox container, which distributes them in a grid. Note that by default, flexbox would distort the images that are shorter in height than others in their row; the property to correct that is <code>align-self</code>. Ideally, in this layout, all the images should be the same width and height. These images are all 300 pixels wide, but the height varies.</p>

<section id="presidents"></section>

<div id="info">
	<h2>President</h2>
	<dl>
		<dt>Party:</dt>
			<dd>"Party"</dd>
		<dt>Took office:</dt>
			<dd>"Took-office"</dd>
		<dt>Age:</dt>
			<dd>"Age-when-took-office"</dd>
		<dt>Left office:</dt>
			<dd>"Left-office"</dd>
		<dt>Home state:</dt>
			<dd>"Home-state"</dd>
		<dt>Occupation:</dt>
			<dd>"Occupation"</dd>
		<dt>College:</dt>
			<dd>"College"</dd>
		<dt>Born:</dt>
			<dd><span>"Birth-date"</span> <span>"Birthplace"</span></dd>
		<dt>Died:</dt>
			<dd><span>"Death-date"</span> <span>"Location-death"</span></dd>
		<dt>Read more:</dt>
			<dd><a href="Wikipedia-entry" target="_blank">Wikipedia</a></dd>
	</dl>
</div>

<p class="clearfix">You should see 45 presidential portraits above.</p>

<!-- only scripts below this -->
<script src="js/jquery.min.js"></script>

<script>
$(document).ready(function() {
	// load the president images
	var num, filename, imgTag;
	for (var i=1; i<46; i++) {
		num = i.toString();
		if (i < 10) {
			num = "0" + num;
		}
		filename = "pr" + num + ".jpg";
		imgTag = '<img class="small-pres" src="images/' + filename + '" alt="President">';
		$('#presidents').append(imgTag);
	}

// show info when a president image is clicked
$('#presidents').on('click', 'img', function() {
	// use DOM to get pres number from the clicked image
	var whichClicked = $(this).index()+1;
	// we wouldn't need Ajax for this but we'll do it anyway
  $.ajax('js/pres.json', {
    success: function(result) {
      $.each(result, function(index, pres) {
				if (pres.Presidency == whichClicked) {
					$( "#info h2").html(pres.President);
					$( "#info dl dd:nth-child(2)" ).html(pres.Party);
					$( "#info dl dd:nth-child(4)" ).html(pres.Took_office);
					$( "#info dl dd:nth-child(6)" ).html(pres.Age_when_took_office);
					$( "#info dl dd:nth-child(8)" ).html(pres.Left_office);
					$( "#info dl dd:nth-child(10)" ).html(pres.Home_state);
					$( "#info dl dd:nth-child(12)" ).html(pres.Occupation);
					$( "#info dl dd:nth-child(14)" ).html(pres.College);
					var birth = pres.Birth_date + " " + pres.Birthplace;
					$( "#info dl dd:nth-child(16)" ).html(birth);
					var death = pres.Death_date + " " + pres.Location_death;
					$( "#info dl dd:nth-child(18)" ).html(death);
					$( "#info dl dd:nth-child(20)" ).html("foobar");
				}
			}); // end $.each
    },
		// give us a message if the JSON file didn't load correctly
		error: function(request, errorType, errorMessage) {
      alert('Error: ' + errorType + ' With message: ' + errorMessage);
    },
    timeout: 3000

}); // end $.ajax()
}); // end .on('click')
}); // end document ready
</script>
</body>
</html>
